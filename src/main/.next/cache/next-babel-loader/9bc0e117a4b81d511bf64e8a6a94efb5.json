{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// _document is only rendered on the server side and not on the client side\n// Event handlers like onClick can't be added to this file\nimport React from 'react';\nimport Document, { Html, Head, Main, NextScript } from \"next/document\";\nimport Manifest from '../components/head/manifest';\nimport Favicon from '../components/head/favicon';\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nclass MyDocument extends Document {\n  static async getInitialProps(ctx) {\n    const initialProps = await Document.getInitialProps(ctx);\n\n    if (ctx.query.amp) {\n      const {\n        html,\n        styles\n      } = this.extractEmotionCssForAmp(initialProps.html);\n      initialProps.html = html;\n      initialProps.styles = styles;\n    }\n\n    return _objectSpread({}, initialProps);\n  }\n  /**\n   * Emotion inserts the <style> tags next to the React component (DOM element), which uses the CSS code.\n   * The AMP specification forces you to use a <style amp-custom=\"\"> tag, which have to be placed inside\n   * of the <head> element. This is not supported by Emotion.\n   *\n   * This method extracts all <style> tags in the <body> and merge the content together into one\n   * <style amp-custom=\"\"> tag inside of <head> (via styles initialProps).\n   *\n   * See: https://amp.dev/documentation/guides-and-tutorials/learn/spec/amphtml#stylesheets\n   *\n   * @param {string} html of the page\n   * @return {string} HTML of the page\n   */\n\n\n  static extractEmotionCssForAmp(html) {\n    const stylesHtmlStrings = html.match(/(<style([^>]+)>)([^>]+)(<\\/style>)/gm);\n    let stylesString = ``;\n\n    for (const styleHtmlString of stylesHtmlStrings) {\n      stylesString += styleHtmlString.replace(/<style([^>]+)>/, \"\").replace(/<\\/style>/, \"\").replace(/\\/\\*([^>]+)\\*\\//, \"\");\n    }\n\n    const styles = [/*#__PURE__*/React.createElement(\"<style>\", {\n      dangerouslySetInnerHTML: {\n        __html: stylesString\n      }\n    })];\n    const htmlWithoutStyles = html.replace(/(<style([^>]+)>)([^>]+)(<\\/style>)/gm, \"\");\n    return {\n      html: htmlWithoutStyles,\n      styles\n    };\n  }\n\n  render() {\n    return (// All of <Html>, <Head />, <Main /> and <NextScript /> are required for page to be properly rendered.\n      ___EmotionJSX(Html, {\n        lang: this.props.__NEXT_DATA__.props.initialLanguage\n      }, ___EmotionJSX(Head, null, ___EmotionJSX(Favicon, null), ___EmotionJSX(Manifest, null)), ___EmotionJSX(\"body\", null, ___EmotionJSX(Main, null), ___EmotionJSX(NextScript, null)))\n    );\n  }\n\n}\n\nexport default MyDocument; // _document is the name adopted by nextjs","map":{"version":3,"sources":["/Users/enayetullahrasuli/Documents/code/nextjs-typescript-react-app/src/main/pages/_document.tsx"],"names":["React","Document","Html","Head","Main","NextScript","Manifest","Favicon","MyDocument","getInitialProps","ctx","initialProps","query","amp","html","styles","extractEmotionCssForAmp","stylesHtmlStrings","match","stylesString","styleHtmlString","replace","createElement","dangerouslySetInnerHTML","__html","htmlWithoutStyles","render","props","__NEXT_DATA__","initialLanguage"],"mappings":";;;;;;;;AAAA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,IAAmBC,IAAnB,EAAyBC,IAAzB,EAA+BC,IAA/B,EAAqCC,UAArC,QAA8F,eAA9F;AAEA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,OAAP,MAAoB,4BAApB;;;AAEA,MAAMC,UAAN,SAAyBP,QAAzB,CAAkC;AAChC,eAAoBQ,eAApB,CAAoCC,GAApC,EAAwF;AACtF,UAAMC,YAAY,GAAG,MAAMV,QAAQ,CAACQ,eAAT,CAAyBC,GAAzB,CAA3B;;AACA,QAAIA,GAAG,CAACE,KAAJ,CAAUC,GAAd,EAAmB;AACjB,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAmB,KAAKC,uBAAL,CAA6BL,YAAY,CAACG,IAA1C,CAAzB;AACAH,MAAAA,YAAY,CAACG,IAAb,GAAoBA,IAApB;AACAH,MAAAA,YAAY,CAACI,MAAb,GAAsBA,MAAtB;AACD;;AACD,6BAAYJ,YAAZ;AACD;AAED;;;;;;;;;;;;;;;AAaA,SAAcK,uBAAd,CAAsCF,IAAtC,EAAoD;AAClD,UAAMG,iBAAiB,GAAGH,IAAI,CAACI,KAAL,CAAW,sCAAX,CAA1B;AACA,QAAIC,YAAY,GAAI,EAApB;;AACA,SAAK,MAAMC,eAAX,IAA8BH,iBAA9B,EAAiD;AAC/CE,MAAAA,YAAY,IAAIC,eAAe,CAC5BC,OADa,CACL,gBADK,EACa,EADb,EAEbA,OAFa,CAEL,WAFK,EAEQ,EAFR,EAGbA,OAHa,CAGL,iBAHK,EAGc,EAHd,CAAhB;AAID;;AAED,UAAMN,MAAM,GAAG,cACbf,KAAK,CAACsB,aAAN,CAAoB,SAApB,EAA+B;AAC7BC,MAAAA,uBAAuB,EAAE;AACvBC,QAAAA,MAAM,EAAEL;AADe;AADI,KAA/B,CADa,CAAf;AAQA,UAAMM,iBAAiB,GAAGX,IAAI,CAACO,OAAL,CAAa,sCAAb,EAAqD,EAArD,CAA1B;AAEA,WAAO;AACLP,MAAAA,IAAI,EAAEW,iBADD;AAELV,MAAAA;AAFK,KAAP;AAID;;AAGMW,EAAAA,MAAP,GAAgB;AACd,WACE;AACA,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAE,KAAKC,KAAL,CAAWC,aAAX,CAAyBD,KAAzB,CAA+BE;AAA3C,SACE,cAAC,IAAD,QACE,cAAC,OAAD,OADF,EAEE,cAAC,QAAD,OAFF,CADF,EAKE,4BACE,cAAC,IAAD,OADF,EAEE,cAAC,UAAD,OAFF,CALF;AAFF;AAaD;;AAjE+B;;AAoElC,eAAerB,UAAf,C,CAEA","sourcesContent":["// _document is only rendered on the server side and not on the client side\n// Event handlers like onClick can't be added to this file\n\nimport React from 'react';\nimport Document, { Html, Head, Main, NextScript, DocumentContext, DocumentInitialProps } from \"next/document\";\n\nimport Manifest from '../components/head/manifest';\nimport Favicon from '../components/head/favicon';\n\nclass MyDocument extends Document {\n  public static async getInitialProps(ctx: DocumentContext):Promise<DocumentInitialProps> {\n    const initialProps = await Document.getInitialProps(ctx);\n    if (ctx.query.amp) {\n      const { html, styles } = this.extractEmotionCssForAmp(initialProps.html);\n      initialProps.html = html;\n      initialProps.styles = styles;\n    }\n    return { ...initialProps };\n  }\n\n  /**\n   * Emotion inserts the <style> tags next to the React component (DOM element), which uses the CSS code.\n   * The AMP specification forces you to use a <style amp-custom=\"\"> tag, which have to be placed inside\n   * of the <head> element. This is not supported by Emotion.\n   *\n   * This method extracts all <style> tags in the <body> and merge the content together into one\n   * <style amp-custom=\"\"> tag inside of <head> (via styles initialProps).\n   *\n   * See: https://amp.dev/documentation/guides-and-tutorials/learn/spec/amphtml#stylesheets\n   *\n   * @param {string} html of the page\n   * @return {string} HTML of the page\n   */\n  public static extractEmotionCssForAmp(html: string) {\n    const stylesHtmlStrings = html.match(/(<style([^>]+)>)([^>]+)(<\\/style>)/gm);\n    let stylesString = ``;\n    for (const styleHtmlString of stylesHtmlStrings) {\n      stylesString += styleHtmlString\n        .replace(/<style([^>]+)>/, \"\")\n        .replace(/<\\/style>/, \"\")\n        .replace(/\\/\\*([^>]+)\\*\\//, \"\");\n    }\n\n    const styles = [\n      React.createElement(\"<style>\", {\n        dangerouslySetInnerHTML: {\n          __html: stylesString,\n        },\n      }),\n    ];\n\n    const htmlWithoutStyles = html.replace(/(<style([^>]+)>)([^>]+)(<\\/style>)/gm, \"\");\n\n    return {\n      html: htmlWithoutStyles,\n      styles,\n    };\n  }\n\n\n  public render() {\n    return (\n      // All of <Html>, <Head />, <Main /> and <NextScript /> are required for page to be properly rendered.\n      <Html lang={this.props.__NEXT_DATA__.props.initialLanguage}>\n        <Head>\n          <Favicon />\n          <Manifest />\n        </Head>\n        <body>\n          <Main />\n          <NextScript />\n        </body>\n      </Html>\n    );\n  }\n}\n\nexport default MyDocument;\n\n// _document is the name adopted by nextjs\n"]},"metadata":{},"sourceType":"module"}